podTemplate(
    nodeSelector: 'disktype=ssd',
    label: 'mypod1',
    containers: [
        containerTemplate(name: 'maven', image: 'maven:3.5.4-jdk-8-slim', command: 'tail-f /dev/null', ttyEnabled: true),
        containerTemplate(name: 'docker', image: 'docker:18.06.1', command: 'tail-f /dev/null', ttypEnabled: true)
    ],
    volumes: [
        hostPathVolume(mountPath: '/var/run/docker.sock', hostPath: '/var/run/docker.sock'),
        hostPathVolume(mountPath: '/home/jenkins/agent', hostPath: '//c/Users/karigar/mounted'),
        hostPathVolume(mountPath: '/root/.m2', hostPath: '//c/Users/karigar/.m2')
    ]
){
    node('mypod1') {
        stage('Check running containers') {
            container('docker') {
                // example to show you can run docker commands when you mount the socket
                sh 'hostname'
                sh 'hostname -i'
                sh 'docker ps'
            }
        }

        stage('Build') {
            container('maven') {
                sh "mvn clean package"   
            }
        }   
    }
}
